var Vr=Object.defineProperty;var ti=(g,c,a)=>c in g?Vr(g,c,{enumerable:!0,configurable:!0,writable:!0,value:a}):g[c]=a;var G=(g,c,a)=>(ti(g,typeof c!="symbol"?c+"":c,a),a);import{A as ei,f as ce,o as ni,d as ri,B as ii,g as oi}from"./index.5992d142.js";import{D as si}from"./button.esm.3357f3a0.js";var fe={exports:{}};/*!
 * Pusher JavaScript Library v7.1.1-beta
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(g,c){(function(s,y){g.exports=y()})(window,function(){return function(a){var s={};function y(d){if(s[d])return s[d].exports;var h=s[d]={i:d,l:!1,exports:{}};return a[d].call(h.exports,h,h.exports,y),h.l=!0,h.exports}return y.m=a,y.c=s,y.d=function(d,h,S){y.o(d,h)||Object.defineProperty(d,h,{enumerable:!0,get:S})},y.r=function(d){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},y.t=function(d,h){if(h&1&&(d=y(d)),h&8||h&4&&typeof d=="object"&&d&&d.__esModule)return d;var S=Object.create(null);if(y.r(S),Object.defineProperty(S,"default",{enumerable:!0,value:d}),h&2&&typeof d!="string")for(var _ in d)y.d(S,_,function(U){return d[U]}.bind(null,_));return S},y.n=function(d){var h=d&&d.__esModule?function(){return d.default}:function(){return d};return y.d(h,"a",h),h},y.o=function(d,h){return Object.prototype.hasOwnProperty.call(d,h)},y.p="",y(y.s=2)}([function(a,s,y){var d=this&&this.__extends||function(){var w=function(f,l){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var R in x)x.hasOwnProperty(R)&&(m[R]=x[R])},w(f,l)};return function(f,l){w(f,l);function m(){this.constructor=f}f.prototype=l===null?Object.create(l):(m.prototype=l.prototype,new m)}}();Object.defineProperty(s,"__esModule",{value:!0});var h=256,S=function(){function w(f){f===void 0&&(f="="),this._paddingCharacter=f}return w.prototype.encodedLength=function(f){return this._paddingCharacter?(f+2)/3*4|0:(f*8+5)/6|0},w.prototype.encode=function(f){for(var l="",m=0;m<f.length-2;m+=3){var x=f[m]<<16|f[m+1]<<8|f[m+2];l+=this._encodeByte(x>>>3*6&63),l+=this._encodeByte(x>>>2*6&63),l+=this._encodeByte(x>>>1*6&63),l+=this._encodeByte(x>>>0*6&63)}var R=f.length-m;if(R>0){var x=f[m]<<16|(R===2?f[m+1]<<8:0);l+=this._encodeByte(x>>>3*6&63),l+=this._encodeByte(x>>>2*6&63),R===2?l+=this._encodeByte(x>>>1*6&63):l+=this._paddingCharacter||"",l+=this._paddingCharacter||""}return l},w.prototype.maxDecodedLength=function(f){return this._paddingCharacter?f/4*3|0:(f*6+7)/8|0},w.prototype.decodedLength=function(f){return this.maxDecodedLength(f.length-this._getPaddingLength(f))},w.prototype.decode=function(f){if(f.length===0)return new Uint8Array(0);for(var l=this._getPaddingLength(f),m=f.length-l,x=new Uint8Array(this.maxDecodedLength(m)),R=0,O=0,N=0,H=0,M=0,X=0,W=0;O<m-4;O+=4)H=this._decodeChar(f.charCodeAt(O+0)),M=this._decodeChar(f.charCodeAt(O+1)),X=this._decodeChar(f.charCodeAt(O+2)),W=this._decodeChar(f.charCodeAt(O+3)),x[R++]=H<<2|M>>>4,x[R++]=M<<4|X>>>2,x[R++]=X<<6|W,N|=H&h,N|=M&h,N|=X&h,N|=W&h;if(O<m-1&&(H=this._decodeChar(f.charCodeAt(O)),M=this._decodeChar(f.charCodeAt(O+1)),x[R++]=H<<2|M>>>4,N|=H&h,N|=M&h),O<m-2&&(X=this._decodeChar(f.charCodeAt(O+2)),x[R++]=M<<4|X>>>2,N|=X&h),O<m-3&&(W=this._decodeChar(f.charCodeAt(O+3)),x[R++]=X<<6|W,N|=W&h),N!==0)throw new Error("Base64Coder: incorrect characters for decoding");return x},w.prototype._encodeByte=function(f){var l=f;return l+=65,l+=25-f>>>8&0-65-26+97,l+=51-f>>>8&26-97-52+48,l+=61-f>>>8&52-48-62+43,l+=62-f>>>8&62-43-63+47,String.fromCharCode(l)},w.prototype._decodeChar=function(f){var l=h;return l+=(42-f&f-44)>>>8&-h+f-43+62,l+=(46-f&f-48)>>>8&-h+f-47+63,l+=(47-f&f-58)>>>8&-h+f-48+52,l+=(64-f&f-91)>>>8&-h+f-65+0,l+=(96-f&f-123)>>>8&-h+f-97+26,l},w.prototype._getPaddingLength=function(f){var l=0;if(this._paddingCharacter){for(var m=f.length-1;m>=0&&f[m]===this._paddingCharacter;m--)l++;if(f.length<4||l>2)throw new Error("Base64Coder: incorrect padding")}return l},w}();s.Coder=S;var _=new S;function U(w){return _.encode(w)}s.encode=U;function b(w){return _.decode(w)}s.decode=b;var C=function(w){d(f,w);function f(){return w!==null&&w.apply(this,arguments)||this}return f.prototype._encodeByte=function(l){var m=l;return m+=65,m+=25-l>>>8&0-65-26+97,m+=51-l>>>8&26-97-52+48,m+=61-l>>>8&52-48-62+45,m+=62-l>>>8&62-45-63+95,String.fromCharCode(m)},f.prototype._decodeChar=function(l){var m=h;return m+=(44-l&l-46)>>>8&-h+l-45+62,m+=(94-l&l-96)>>>8&-h+l-95+63,m+=(47-l&l-58)>>>8&-h+l-48+52,m+=(64-l&l-91)>>>8&-h+l-65+0,m+=(96-l&l-123)>>>8&-h+l-97+26,m},f}(S);s.URLSafeCoder=C;var p=new C;function P(w){return p.encode(w)}s.encodeURLSafe=P;function E(w){return p.decode(w)}s.decodeURLSafe=E,s.encodedLength=function(w){return _.encodedLength(w)},s.maxDecodedLength=function(w){return _.maxDecodedLength(w)},s.decodedLength=function(w){return _.decodedLength(w)}},function(a,s,y){Object.defineProperty(s,"__esModule",{value:!0});var d="utf8: invalid string",h="utf8: invalid source encoding";function S(b){for(var C=new Uint8Array(_(b)),p=0,P=0;P<b.length;P++){var E=b.charCodeAt(P);E<128?C[p++]=E:E<2048?(C[p++]=192|E>>6,C[p++]=128|E&63):E<55296?(C[p++]=224|E>>12,C[p++]=128|E>>6&63,C[p++]=128|E&63):(P++,E=(E&1023)<<10,E|=b.charCodeAt(P)&1023,E+=65536,C[p++]=240|E>>18,C[p++]=128|E>>12&63,C[p++]=128|E>>6&63,C[p++]=128|E&63)}return C}s.encode=S;function _(b){for(var C=0,p=0;p<b.length;p++){var P=b.charCodeAt(p);if(P<128)C+=1;else if(P<2048)C+=2;else if(P<55296)C+=3;else if(P<=57343){if(p>=b.length-1)throw new Error(d);p++,C+=4}else throw new Error(d)}return C}s.encodedLength=_;function U(b){for(var C=[],p=0;p<b.length;p++){var P=b[p];if(P&128){var E=void 0;if(P<224){if(p>=b.length)throw new Error(h);var w=b[++p];if((w&192)!==128)throw new Error(h);P=(P&31)<<6|w&63,E=128}else if(P<240){if(p>=b.length-1)throw new Error(h);var w=b[++p],f=b[++p];if((w&192)!==128||(f&192)!==128)throw new Error(h);P=(P&15)<<12|(w&63)<<6|f&63,E=2048}else if(P<248){if(p>=b.length-2)throw new Error(h);var w=b[++p],f=b[++p],l=b[++p];if((w&192)!==128||(f&192)!==128||(l&192)!==128)throw new Error(h);P=(P&15)<<18|(w&63)<<12|(f&63)<<6|l&63,E=65536}else throw new Error(h);if(P<E||P>=55296&&P<=57343)throw new Error(h);if(P>=65536){if(P>1114111)throw new Error(h);P-=65536,C.push(String.fromCharCode(55296|P>>10)),P=56320|P&1023}}C.push(String.fromCharCode(P))}return C.join("")}s.decode=U},function(a,s,y){a.exports=y(3).default},function(a,s,y){y.r(s);var d=function(){function e(t,n){this.lastId=0,this.prefix=t,this.name=n}return e.prototype.create=function(t){this.lastId++;var n=this.lastId,r=this.prefix+n,i=this.name+"["+n+"]",o=!1,u=function(){o||(t.apply(null,arguments),o=!0)};return this[n]=u,{number:n,id:r,name:i,callback:u}},e.prototype.remove=function(t){delete this[t.number]},e}(),h=new d("_pusher_script_","Pusher.ScriptReceivers"),S={VERSION:"7.1.1-beta",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},_=S,U=function(){function e(t){this.options=t,this.receivers=t.receivers||h,this.loading={}}return e.prototype.load=function(t,n,r){var i=this;if(i.loading[t]&&i.loading[t].length>0)i.loading[t].push(r);else{i.loading[t]=[r];var o=A.createScriptRequest(i.getPath(t,n)),u=i.receivers.create(function(v){if(i.receivers.remove(u),i.loading[t]){var T=i.loading[t];delete i.loading[t];for(var L=function(z){z||o.cleanup()},D=0;D<T.length;D++)T[D](v,L)}});o.send(u)}},e.prototype.getRoot=function(t){var n,r=A.getDocument().location.protocol;return t&&t.useTLS||r==="https:"?n=this.options.cdn_https:n=this.options.cdn_http,n.replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(t,n){return this.getRoot(n)+"/"+t+this.options.suffix+".js"},e}(),b=U,C=new d("_pusher_dependencies","Pusher.DependenciesReceivers"),p=new b({cdn_http:_.cdn_http,cdn_https:_.cdn_https,version:_.VERSION,suffix:_.dependency_suffix,receivers:C}),P={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},E=function(e){var t="See:",n=P.urls[e];if(!n)return"";var r;return n.fullUrl?r=n.fullUrl:n.path&&(r=P.baseUrl+n.path),r?t+" "+r:""},w={buildLogSuffix:E},f;(function(e){e.UserAuthentication="user-authentication",e.ChannelAuthorization="channel-authorization"})(f||(f={}));var l=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(e){l(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),x=function(e){l(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),R=function(e){l(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),O=function(e){l(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),N=function(e){l(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),H=function(e){l(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),M=function(e){l(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),X=function(e){l(t,e);function t(n){var r=this.constructor,i=e.call(this,n)||this;return Object.setPrototypeOf(i,r.prototype),i}return t}(Error),W=function(e){l(t,e);function t(n,r){var i=this.constructor,o=e.call(this,r)||this;return o.status=n,Object.setPrototypeOf(o,i.prototype),o}return t}(Error),ht=function(e,t,n,r,i){var o=A.createXHR();o.open("POST",n.endpoint,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var u in n.headers)o.setRequestHeader(u,n.headers[u]);return o.onreadystatechange=function(){if(o.readyState===4)if(o.status===200){var v=void 0,T=!1;try{v=JSON.parse(o.responseText),T=!0}catch{i(new W(200,"JSON returned from "+r.toString()+" endpoint was invalid, yet status code was 200. Data was: "+o.responseText),null)}T&&i(null,v)}else{var L="";switch(r){case f.UserAuthentication:L=w.buildLogSuffix("authenticationEndpoint");break;case f.ChannelAuthorization:L="Clients must be authenticated to join private or presence channels. "+w.buildLogSuffix("authorizationEndpoint");break}i(new W(o.status,"Unable to retrieve auth string from "+r.toString()+" endpoint - "+("received status: "+o.status+" from "+n.endpoint+". "+L)),null)}},o.send(t),o},pt=ht;function lt(e){return pe(Q(e))}var V=String.fromCharCode,K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?V(192|t>>>6)+V(128|t&63):V(224|t>>>12&15)+V(128|t>>>6&63)+V(128|t&63)},Q=function(e){return e.replace(/[^\x00-\x7F]/g,j)},he=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[K.charAt(n>>>18),K.charAt(n>>>12&63),t>=2?"=":K.charAt(n>>>6&63),t>=1?"=":K.charAt(n&63)];return r.join("")},pe=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,he)},le=function(){function e(t,n,r,i){var o=this;this.clear=n,this.timer=t(function(){o.timer&&(o.timer=i(o.timer))},r)}return e.prototype.isRunning=function(){return this.timer!==null},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),Mt=le,Nt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function de(e){window.clearTimeout(e)}function ve(e){window.clearInterval(e)}var et=function(e){Nt(t,e);function t(n,r){return e.call(this,setTimeout,de,n,function(i){return r(),null})||this}return t}(Mt),ye=function(e){Nt(t,e);function t(n,r){return e.call(this,setInterval,ve,n,function(i){return r(),i})||this}return t}(Mt),ge={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(e){return new et(0,e)},method:function(e){var t=Array.prototype.slice.call(arguments,1);return function(n){return n[e].apply(n,t.concat(arguments))}}},q=ge;function B(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var o in i)i[o]&&i[o].constructor&&i[o].constructor===Object?e[o]=B(e[o]||{},i[o]):e[o]=i[o]}return e}function _e(){for(var e=["Pusher"],t=0;t<arguments.length;t++)typeof arguments[t]=="string"?e.push(arguments[t]):e.push(dt(arguments[t]));return e.join(" : ")}function Rt(e,t){var n=Array.prototype.indexOf;if(e===null)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function Y(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function jt(e){var t=[];return Y(e,function(n,r){t.push(r)}),t}function me(e){var t=[];return Y(e,function(n){t.push(n)}),t}function ct(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function It(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function be(e,t){var n={};return Y(e,function(r,i){n[i]=t(r)}),n}function Dt(e,t){t=t||function(i){return!!i};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function Ut(e,t){var n={};return Y(e,function(r,i){(t&&t(r,i,e,n)||Boolean(r))&&(n[i]=r)}),n}function Se(e){var t=[];return Y(e,function(n,r){t.push([r,n])}),t}function Ht(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function Ce(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}function we(e){return be(e,function(t){return typeof t=="object"&&(t=dt(t)),encodeURIComponent(lt(t.toString()))})}function Te(e){var t=Ut(e,function(r){return r!==void 0}),n=It(Se(we(t)),q.method("join","=")).join("&");return n}function xe(e){var t=[],n=[];return function r(i,o){var u,v,T;switch(typeof i){case"object":if(!i)return null;for(u=0;u<t.length;u+=1)if(t[u]===i)return{$ref:n[u]};if(t.push(i),n.push(o),Object.prototype.toString.apply(i)==="[object Array]")for(T=[],u=0;u<i.length;u+=1)T[u]=r(i[u],o+"["+u+"]");else{T={};for(v in i)Object.prototype.hasOwnProperty.call(i,v)&&(T[v]=r(i[v],o+"["+JSON.stringify(v)+"]"))}return T;case"number":case"string":case"boolean":return i}}(e,"$")}function dt(e){try{return JSON.stringify(e)}catch{return JSON.stringify(xe(e))}}var Pe=function(){function e(){this.globalLog=function(t){window.console&&window.console.log&&window.console.log(t)}}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLog,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLogWarn,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLogError,t)},e.prototype.globalLogWarn=function(t){window.console&&window.console.warn?window.console.warn(t):this.globalLog(t)},e.prototype.globalLogError=function(t){window.console&&window.console.error?window.console.error(t):this.globalLogWarn(t)},e.prototype.log=function(t){var n=_e.apply(this,arguments);if(kt.log)kt.log(n);else if(kt.logToConsole){var r=t.bind(this);r(n)}},e}(),I=new Pe,Oe=function(e,t,n,r,i){n.headers!==void 0&&I.warn("To send headers with the "+r.toString()+" request, you must use AJAX, rather than JSONP.");var o=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var u=e.getDocument(),v=u.createElement("script");e.auth_callbacks[o]=function(D){i(null,D)};var T="Pusher.auth_callbacks['"+o+"']";v.src=n.endpoint+"?callback="+encodeURIComponent(T)+"&"+t;var L=u.getElementsByTagName("head")[0]||u.documentElement;L.insertBefore(v,L.firstChild)},Ae=Oe,ke=function(){function e(t){this.src=t}return e.prototype.send=function(t){var n=this,r="Error loading "+n.src;n.script=document.createElement("script"),n.script.id=t.id,n.script.src=n.src,n.script.type="text/javascript",n.script.charset="UTF-8",n.script.addEventListener?(n.script.onerror=function(){t.callback(r)},n.script.onload=function(){t.callback(null)}):n.script.onreadystatechange=function(){(n.script.readyState==="loaded"||n.script.readyState==="complete")&&t.callback(null)},n.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(n.errorScript=document.createElement("script"),n.errorScript.id=t.id+"_error",n.errorScript.text=t.name+"('"+r+"');",n.script.async=n.errorScript.async=!1):n.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(n.script,i.firstChild),n.errorScript&&i.insertBefore(n.errorScript,n.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),Le=ke,Ee=function(){function e(t,n){this.url=t,this.data=n}return e.prototype.send=function(t){if(!this.request){var n=Te(this.data),r=this.url+"/"+t.number+"?"+n;this.request=A.createScriptRequest(r),this.request.send(t)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}(),Me=Ee,Ne=function(e,t){return function(n,r){var i="http"+(t?"s":"")+"://",o=i+(e.host||e.options.host)+e.options.path,u=A.createJSONPRequest(o,n),v=A.ScriptReceivers.create(function(T,L){h.remove(v),u.cleanup(),L&&L.host&&(e.host=L.host),r&&r(T,L)});u.send(v)}},Re={name:"jsonp",getAgent:Ne},je=Re;function mt(e,t,n){var r=e+(t.useTLS?"s":""),i=t.useTLS?t.hostTLS:t.hostNonTLS;return r+"://"+i+n}function bt(e,t){var n="/app/"+e,r="?protocol="+_.PROTOCOL+"&client=js&version="+_.VERSION+(t?"&"+t:"");return n+r}var Ie={getInitial:function(e,t){var n=(t.httpPath||"")+bt(e,"flash=false");return mt("ws",t,n)}},De={getInitial:function(e,t){var n=(t.httpPath||"/pusher")+bt(e);return mt("http",t,n)}},Ue={getInitial:function(e,t){return mt("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return bt(e)}},He=function(){function e(){this._callbacks={}}return e.prototype.get=function(t){return this._callbacks[St(t)]},e.prototype.add=function(t,n,r){var i=St(t);this._callbacks[i]=this._callbacks[i]||[],this._callbacks[i].push({fn:n,context:r})},e.prototype.remove=function(t,n,r){if(!t&&!n&&!r){this._callbacks={};return}var i=t?[St(t)]:jt(this._callbacks);n||r?this.removeCallback(i,n,r):this.removeAllCallbacks(i)},e.prototype.removeCallback=function(t,n,r){ct(t,function(i){this._callbacks[i]=Dt(this._callbacks[i]||[],function(o){return n&&n!==o.fn||r&&r!==o.context}),this._callbacks[i].length===0&&delete this._callbacks[i]},this)},e.prototype.removeAllCallbacks=function(t){ct(t,function(n){delete this._callbacks[n]},this)},e}(),qe=He;function St(e){return"_"+e}var ze=function(){function e(t){this.callbacks=new qe,this.global_callbacks=[],this.failThrough=t}return e.prototype.bind=function(t,n,r){return this.callbacks.add(t,n,r),this},e.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},e.prototype.unbind=function(t,n,r){return this.callbacks.remove(t,n,r),this},e.prototype.unbind_global=function(t){return t?(this.global_callbacks=Dt(this.global_callbacks||[],function(n){return n!==t}),this):(this.global_callbacks=[],this)},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(t,n,r){for(var i=0;i<this.global_callbacks.length;i++)this.global_callbacks[i](t,n);var o=this.callbacks.get(t),u=[];if(r?u.push(n,r):n&&u.push(n),o&&o.length>0)for(var i=0;i<o.length;i++)o[i].fn.apply(o[i].context||window,u);else this.failThrough&&this.failThrough(t,n);return this},e}(),tt=ze,Be=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fe=function(e){Be(t,e);function t(n,r,i,o,u){var v=e.call(this)||this;return v.initialize=A.transportConnectionInitializer,v.hooks=n,v.name=r,v.priority=i,v.key=o,v.options=u,v.state="new",v.timeline=u.timeline,v.activityTimeout=u.activityTimeout,v.id=v.timeline.generateUniqueID(),v}return t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var n=this;if(this.socket||this.state!=="initialized")return!1;var r=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(r,this.options)}catch(i){return q.defer(function(){n.onError(i),n.changeState("closed")}),!1}return this.bindListeners(),I.debug("Connecting",{transport:this.name,url:r}),this.changeState("connecting"),!0},t.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},t.prototype.send=function(n){var r=this;return this.state==="open"?(q.defer(function(){r.socket&&r.socket.send(n)}),!0):!1},t.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(n){this.emit("error",{type:"WebSocketError",error:n}),this.timeline.error(this.buildTimelineMessage({error:n.toString()}))},t.prototype.onClose=function(n){n?this.changeState("closed",{code:n.code,reason:n.reason,wasClean:n.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(n){this.emit("message",n)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var n=this;this.socket.onopen=function(){n.onOpen()},this.socket.onerror=function(r){n.onError(r)},this.socket.onclose=function(r){n.onClose(r)},this.socket.onmessage=function(r){n.onMessage(r)},this.supportsPing()&&(this.socket.onactivity=function(){n.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(n,r){this.state=n,this.timeline.info(this.buildTimelineMessage({state:n,params:r})),this.emit(n,r)},t.prototype.buildTimelineMessage=function(n){return B({cid:this.id},n)},t}(tt),Je=Fe,Xe=function(){function e(t){this.hooks=t}return e.prototype.isSupported=function(t){return this.hooks.isSupported(t)},e.prototype.createConnection=function(t,n,r,i){return new Je(this.hooks,t,n,r,i)},e}(),ot=Xe,We=new ot({urls:Ie,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(A.getWebSocketAPI())},isSupported:function(){return Boolean(A.getWebSocketAPI())},getSocket:function(e){return A.createWebSocket(e)}}),qt={urls:De,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},zt=B({getSocket:function(e){return A.HTTPFactory.createStreamingSocket(e)}},qt),Bt=B({getSocket:function(e){return A.HTTPFactory.createPollingSocket(e)}},qt),Ft={isSupported:function(){return A.isXHRSupported()}},Ge=new ot(B({},zt,Ft)),Qe=new ot(B({},Bt,Ft)),$e={ws:We,xhr_streaming:Ge,xhr_polling:Qe},vt=$e,Ke=new ot({file:"sockjs",urls:Ue,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:p.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),Jt={isSupported:function(e){var t=A.isXDRSupported(e.useTLS);return t}},Ye=new ot(B({},zt,Jt)),Ze=new ot(B({},Bt,Jt));vt.xdr_streaming=Ye,vt.xdr_polling=Ze,vt.sockjs=Ke;var Ve=vt,tn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),en=function(e){tn(t,e);function t(){var n=e.call(this)||this,r=n;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){r.emit("online")},!1),window.addEventListener("offline",function(){r.emit("offline")},!1)),n}return t.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},t}(tt),nn=new en,rn=function(){function e(t,n,r){this.manager=t,this.transport=n,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(t,n,r,i){var o=this;i=B({},i,{activityTimeout:this.pingDelay});var u=this.transport.createConnection(t,n,r,i),v=null,T=function(){u.unbind("open",T),u.bind("closed",L),v=q.now()},L=function(D){if(u.unbind("closed",L),D.code===1002||D.code===1003)o.manager.reportDeath();else if(!D.wasClean&&v){var z=q.now()-v;z<2*o.maxPingDelay&&(o.manager.reportDeath(),o.pingDelay=Math.max(z/2,o.minPingDelay))}};return u.bind("open",T),u},e.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},e}(),on=rn,Xt={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if(typeof n=="string")try{n=JSON.parse(t.data)}catch{}var r={event:t.event,channel:t.channel,data:n};return t.user_id&&(r.user_id=t.user_id),r}catch(i){throw{type:"MessageParseError",error:i,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=Xt.decodeMessage(e);if(t.event==="pusher:connection_established"){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:t.data.activity_timeout*1e3}}else{if(t.event==="pusher:error")return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"}},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:e.code===4e3?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return e.code!==1e3&&e.code!==1001?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},nt=Xt,sn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),an=function(e){sn(t,e);function t(n,r){var i=e.call(this)||this;return i.id=n,i.transport=r,i.activityTimeout=r.activityTimeout,i.bindListeners(),i}return t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(n){return this.transport.send(n)},t.prototype.send_event=function(n,r,i){var o={event:n,data:r};return i&&(o.channel=i),I.debug("Event sent",o),this.send(nt.encodeMessage(o))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var n=this,r={message:function(o){var u;try{u=nt.decodeMessage(o)}catch(v){n.emit("error",{type:"MessageParseError",error:v,data:o.data})}if(u!==void 0){switch(I.debug("Event recd",u),u.event){case"pusher:error":n.emit("error",{type:"PusherError",data:u.data});break;case"pusher:ping":n.emit("ping");break;case"pusher:pong":n.emit("pong");break}n.emit("message",u)}},activity:function(){n.emit("activity")},error:function(o){n.emit("error",o)},closed:function(o){i(),o&&o.code&&n.handleCloseEvent(o),n.transport=null,n.emit("closed")}},i=function(){Y(r,function(o,u){n.transport.unbind(u,o)})};Y(r,function(o,u){n.transport.bind(u,o)})},t.prototype.handleCloseEvent=function(n){var r=nt.getCloseAction(n),i=nt.getCloseError(n);i&&this.emit("error",i),r&&this.emit(r,{action:r,error:i})},t}(tt),cn=an,un=function(){function e(t,n){this.transport=t,this.callback=n,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var t=this;this.onMessage=function(n){t.unbindListeners();var r;try{r=nt.processHandshake(n)}catch(i){t.finish("error",{error:i}),t.transport.close();return}r.action==="connected"?t.finish("connected",{connection:new cn(r.id,t.transport),activityTimeout:r.activityTimeout}):(t.finish(r.action,{error:r.error}),t.transport.close())},this.onClosed=function(n){t.unbindListeners();var r=nt.getCloseAction(n)||"backoff",i=nt.getCloseError(n);t.finish(r,{error:i})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(t,n){this.callback(B({transport:this.transport,action:t},n))},e}(),fn=un,hn=function(){function e(t,n){this.timeline=t,this.options=n||{}}return e.prototype.send=function(t,n){this.timeline.isEmpty()||this.timeline.send(A.TimelineTransport.getAgent(this,t),n)},e}(),pn=hn,ln=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dn=function(e){ln(t,e);function t(n,r){var i=e.call(this,function(o,u){I.debug("No callbacks on "+n+" for "+o)})||this;return i.name=n,i.pusher=r,i.subscribed=!1,i.subscriptionPending=!1,i.subscriptionCancelled=!1,i}return t.prototype.authorize=function(n,r){return r(null,{auth:""})},t.prototype.trigger=function(n,r){if(n.indexOf("client-")!==0)throw new m("Event '"+n+"' does not start with 'client-'");if(!this.subscribed){var i=w.buildLogSuffix("triggeringClientEvents");I.warn("Client event triggered before channel 'subscription_succeeded' event . "+i)}return this.pusher.send_event(n,r,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(n){var r=n.event,i=n.data;if(r==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(n);else if(r.indexOf("pusher_internal:")!==0){var o={};this.emit(r,i,o)}},t.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",n.data)},t.prototype.subscribe=function(){var n=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(r,i){r?(n.subscriptionPending=!1,I.error(r.toString()),n.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:r.message},r instanceof W?{status:r.status}:{}))):n.pusher.send_event("pusher:subscribe",{auth:i.auth,channel_data:i.channel_data,channel:n.name})}))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(tt),Ct=dn,vn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yn=function(e){vn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.authorize=function(n,r){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:n},r)},t}(Ct),wt=yn,gn=function(){function e(){this.reset()}return e.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},e.prototype.each=function(t){var n=this;Y(this.members,function(r,i){t(n.get(i))})},e.prototype.setMyID=function(t){this.myID=t},e.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(t){return this.get(t.user_id)===null&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},e.prototype.removeMember=function(t){var n=this.get(t.user_id);return n&&(delete this.members[t.user_id],this.count--),n},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),_n=gn,mn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bn=function(e){mn(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.members=new _n,i}return t.prototype.authorize=function(n,r){var i=this;e.prototype.authorize.call(this,n,function(o,u){if(!o){if(u=u,u.channel_data===void 0){var v=w.buildLogSuffix("authenticationEndpoint");I.error("Invalid auth response for channel '"+i.name+"',"+("expected 'channel_data' field. "+v)),r("Invalid auth response");return}var T=JSON.parse(u.channel_data);i.members.setMyID(T.user_id)}r(o,u)})},t.prototype.handleEvent=function(n){var r=n.event;if(r.indexOf("pusher_internal:")===0)this.handleInternalEvent(n);else{var i=n.data,o={};n.user_id&&(o.user_id=n.user_id),this.emit(r,i,o)}},t.prototype.handleInternalEvent=function(n){var r=n.event,i=n.data;switch(r){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(n);break;case"pusher_internal:member_added":var o=this.members.addMember(i);this.emit("pusher:member_added",o);break;case"pusher_internal:member_removed":var u=this.members.removeMember(i);u&&this.emit("pusher:member_removed",u);break}},t.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(n.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(wt),Sn=bn,Cn=y(1),Tt=y(0),wn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tn=function(e){wn(t,e);function t(n,r,i){var o=e.call(this,n,r)||this;return o.key=null,o.nacl=i,o}return t.prototype.authorize=function(n,r){var i=this;e.prototype.authorize.call(this,n,function(o,u){if(o){r(o,u);return}var v=u.shared_secret;if(!v){r(new Error("No shared_secret key in auth payload for encrypted channel: "+i.name),null);return}i.key=Object(Tt.decode)(v),delete u.shared_secret,r(null,u)})},t.prototype.trigger=function(n,r){throw new H("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(n){var r=n.event,i=n.data;if(r.indexOf("pusher_internal:")===0||r.indexOf("pusher:")===0){e.prototype.handleEvent.call(this,n);return}this.handleEncryptedEvent(r,i)},t.prototype.handleEncryptedEvent=function(n,r){var i=this;if(!this.key){I.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!r.ciphertext||!r.nonce){I.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+r);return}var o=Object(Tt.decode)(r.ciphertext);if(o.length<this.nacl.secretbox.overheadLength){I.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+o.length);return}var u=Object(Tt.decode)(r.nonce);if(u.length<this.nacl.secretbox.nonceLength){I.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+u.length);return}var v=this.nacl.secretbox.open(o,u,this.key);if(v===null){I.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(T,L){if(T){I.error("Failed to make a request to the authEndpoint: "+L+". Unable to fetch new key, so dropping encrypted event");return}if(v=i.nacl.secretbox.open(o,u,i.key),v===null){I.error("Failed to decrypt event with new key. Dropping encrypted event");return}i.emit(n,i.getDataToEmit(v))});return}this.emit(n,this.getDataToEmit(v))},t.prototype.getDataToEmit=function(n){var r=Object(Cn.decode)(n);try{return JSON.parse(r)}catch{return r}},t}(wt),xn=Tn,Pn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),On=function(e){Pn(t,e);function t(n,r){var i=e.call(this)||this;i.state="initialized",i.connection=null,i.key=n,i.options=r,i.timeline=i.options.timeline,i.usingTLS=i.options.useTLS,i.errorCallbacks=i.buildErrorCallbacks(),i.connectionCallbacks=i.buildConnectionCallbacks(i.errorCallbacks),i.handshakeCallbacks=i.buildHandshakeCallbacks(i.errorCallbacks);var o=A.getNetwork();return o.bind("online",function(){i.timeline.info({netinfo:"online"}),(i.state==="connecting"||i.state==="unavailable")&&i.retryIn(0)}),o.bind("offline",function(){i.timeline.info({netinfo:"offline"}),i.connection&&i.sendActivityCheck()}),i.updateStrategy(),i}return t.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},t.prototype.send=function(n){return this.connection?this.connection.send(n):!1},t.prototype.send_event=function(n,r,i){return this.connection?this.connection.send_event(n,r,i):!1},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var n=this,r=function(i,o){i?n.runner=n.strategy.connect(0,r):o.action==="error"?(n.emit("error",{type:"HandshakeError",error:o.error}),n.timeline.error({handshakeError:o.error})):(n.abortConnecting(),n.handshakeCallbacks[o.action](o))};this.runner=this.strategy.connect(0,r)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var n=this.abandonConnection();n.close()}},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(n){var r=this;this.timeline.info({action:"retry",delay:n}),n>0&&this.emit("connecting_in",Math.round(n/1e3)),this.retryTimer=new et(n||0,function(){r.disconnectInternally(),r.connect()})},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var n=this;this.unavailableTimer=new et(this.options.unavailableTimeout,function(){n.updateState("unavailable")})},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new et(this.options.pongTimeout,function(){n.timeline.error({pong_timed_out:n.options.pongTimeout}),n.retryIn(0)})},t.prototype.resetActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new et(this.activityTimeout,function(){n.sendActivityCheck()}))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(n){var r=this;return B({},n,{message:function(i){r.resetActivityCheck(),r.emit("message",i)},ping:function(){r.send_event("pusher:pong",{})},activity:function(){r.resetActivityCheck()},error:function(i){r.emit("error",i)},closed:function(){r.abandonConnection(),r.shouldRetry()&&r.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(n){var r=this;return B({},n,{connected:function(i){r.activityTimeout=Math.min(r.options.activityTimeout,i.activityTimeout,i.connection.activityTimeout||1/0),r.clearUnavailableTimer(),r.setConnection(i.connection),r.socket_id=r.connection.id,r.updateState("connected",{socket_id:r.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var n=this,r=function(i){return function(o){o.error&&n.emit("error",{type:"WebSocketError",error:o.error}),i(o)}};return{tls_only:r(function(){n.usingTLS=!0,n.updateStrategy(),n.retryIn(0)}),refused:r(function(){n.disconnect()}),backoff:r(function(){n.retryIn(1e3)}),retry:r(function(){n.retryIn(0)})}},t.prototype.setConnection=function(n){this.connection=n;for(var r in this.connectionCallbacks)this.connection.bind(r,this.connectionCallbacks[r]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(!!this.connection){this.stopActivityCheck();for(var n in this.connectionCallbacks)this.connection.unbind(n,this.connectionCallbacks[n]);var r=this.connection;return this.connection=null,r}},t.prototype.updateState=function(n,r){var i=this.state;if(this.state=n,i!==n){var o=n;o==="connected"&&(o+=" with new socket ID "+r.socket_id),I.debug("State changed",i+" -> "+o),this.timeline.info({state:n,params:r}),this.emit("state_change",{previous:i,current:n}),this.emit(n,r)}},t.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},t}(tt),An=On,kn=function(){function e(){this.channels={}}return e.prototype.add=function(t,n){return this.channels[t]||(this.channels[t]=En(t,n)),this.channels[t]},e.prototype.all=function(){return me(this.channels)},e.prototype.find=function(t){return this.channels[t]},e.prototype.remove=function(t){var n=this.channels[t];return delete this.channels[t],n},e.prototype.disconnect=function(){Y(this.channels,function(t){t.disconnect()})},e}(),Ln=kn;function En(e,t){if(e.indexOf("private-encrypted-")===0){if(t.config.nacl)return Z.createEncryptedChannel(e,t,t.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=w.buildLogSuffix("encryptedChannelSupport");throw new H(n+". "+r)}else{if(e.indexOf("private-")===0)return Z.createPrivateChannel(e,t);if(e.indexOf("presence-")===0)return Z.createPresenceChannel(e,t);if(e.indexOf("#")===0)throw new x('Cannot create a channel with name "'+e+'".');return Z.createChannel(e,t)}}var Mn={createChannels:function(){return new Ln},createConnectionManager:function(e,t){return new An(e,t)},createChannel:function(e,t){return new Ct(e,t)},createPrivateChannel:function(e,t){return new wt(e,t)},createPresenceChannel:function(e,t){return new Sn(e,t)},createEncryptedChannel:function(e,t,n){return new xn(e,t,n)},createTimelineSender:function(e,t){return new pn(e,t)},createHandshake:function(e,t){return new fn(e,t)},createAssistantToTheTransportManager:function(e,t,n){return new on(e,t,n)}},Z=Mn,Nn=function(){function e(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(t){return Z.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),Wt=Nn,Rn=function(){function e(t,n){this.strategies=t,this.loop=Boolean(n.loop),this.failFast=Boolean(n.failFast),this.timeout=n.timeout,this.timeoutLimit=n.timeoutLimit}return e.prototype.isSupported=function(){return Ht(this.strategies,q.method("isSupported"))},e.prototype.connect=function(t,n){var r=this,i=this.strategies,o=0,u=this.timeout,v=null,T=function(L,D){D?n(null,D):(o=o+1,r.loop&&(o=o%i.length),o<i.length?(u&&(u=u*2,r.timeoutLimit&&(u=Math.min(u,r.timeoutLimit))),v=r.tryStrategy(i[o],t,{timeout:u,failFast:r.failFast},T)):n(!0))};return v=this.tryStrategy(i[o],t,{timeout:u,failFast:this.failFast},T),{abort:function(){v.abort()},forceMinPriority:function(L){t=L,v&&v.forceMinPriority(L)}}},e.prototype.tryStrategy=function(t,n,r,i){var o=null,u=null;return r.timeout>0&&(o=new et(r.timeout,function(){u.abort(),i(!0)})),u=t.connect(n,function(v,T){v&&o&&o.isRunning()&&!r.failFast||(o&&o.ensureAborted(),i(v,T))}),{abort:function(){o&&o.ensureAborted(),u.abort()},forceMinPriority:function(v){u.forceMinPriority(v)}}},e}(),rt=Rn,jn=function(){function e(t){this.strategies=t}return e.prototype.isSupported=function(){return Ht(this.strategies,q.method("isSupported"))},e.prototype.connect=function(t,n){return In(this.strategies,t,function(r,i){return function(o,u){if(i[r].error=o,o){Dn(i)&&n(!0);return}ct(i,function(v){v.forceMinPriority(u.transport.priority)}),n(null,u)}})},e}(),xt=jn;function In(e,t,n){var r=It(e,function(i,o,u,v){return i.connect(t,n(o,v))});return{abort:function(){ct(r,Un)},forceMinPriority:function(i){ct(r,function(o){o.forceMinPriority(i)})}}}function Dn(e){return Ce(e,function(t){return Boolean(t.error)})}function Un(e){!e.error&&!e.aborted&&(e.abort(),e.aborted=!0)}var Hn=function(){function e(t,n,r){this.strategy=t,this.transports=n,this.ttl=r.ttl||1800*1e3,this.usingTLS=r.useTLS,this.timeline=r.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.usingTLS,i=zn(r),o=[this.strategy];if(i&&i.timestamp+this.ttl>=q.now()){var u=this.transports[i.transport];u&&(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),o.push(new rt([u],{timeout:i.latency*2+1e3,failFast:!0})))}var v=q.now(),T=o.pop().connect(t,function L(D,z){D?(Gt(r),o.length>0?(v=q.now(),T=o.pop().connect(t,L)):n(D)):(Bn(r,z.transport.name,q.now()-v),n(null,z))});return{abort:function(){T.abort()},forceMinPriority:function(L){t=L,T&&T.forceMinPriority(L)}}},e}(),qn=Hn;function Pt(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function zn(e){var t=A.getLocalStorage();if(t)try{var n=t[Pt(e)];if(n)return JSON.parse(n)}catch{Gt(e)}return null}function Bn(e,t,n){var r=A.getLocalStorage();if(r)try{r[Pt(e)]=dt({timestamp:q.now(),transport:t,latency:n})}catch{}}function Gt(e){var t=A.getLocalStorage();if(t)try{delete t[Pt(e)]}catch{}}var Fn=function(){function e(t,n){var r=n.delay;this.strategy=t,this.options={delay:r}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.strategy,i,o=new et(this.options.delay,function(){i=r.connect(t,n)});return{abort:function(){o.ensureAborted(),i&&i.abort()},forceMinPriority:function(u){t=u,i&&i.forceMinPriority(u)}}},e}(),yt=Fn,Jn=function(){function e(t,n,r){this.test=t,this.trueBranch=n,this.falseBranch=r}return e.prototype.isSupported=function(){var t=this.test()?this.trueBranch:this.falseBranch;return t.isSupported()},e.prototype.connect=function(t,n){var r=this.test()?this.trueBranch:this.falseBranch;return r.connect(t,n)},e}(),ut=Jn,Xn=function(){function e(t){this.strategy=t}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.strategy.connect(t,function(i,o){o&&r.abort(),n(i,o)});return r},e}(),Wn=Xn;function ft(e){return function(){return e.isSupported()}}var Gn=function(e,t,n){var r={};function i(se,$r,Kr,Yr,Zr){var ae=n(e,se,$r,Kr,Yr,Zr);return r[se]=ae,ae}var o=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),u=Object.assign({},o,{useTLS:!0}),v=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),T={loop:!0,timeout:15e3,timeoutLimit:6e4},L=new Wt({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),D=new Wt({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),z=i("ws","ws",3,o,L),$=i("wss","ws",3,u,L),Jr=i("sockjs","sockjs",1,v),te=i("xhr_streaming","xhr_streaming",1,v,D),Xr=i("xdr_streaming","xdr_streaming",1,v,D),ee=i("xhr_polling","xhr_polling",1,v),Wr=i("xdr_polling","xdr_polling",1,v),ne=new rt([z],T),Gr=new rt([$],T),Qr=new rt([Jr],T),re=new rt([new ut(ft(te),te,Xr)],T),ie=new rt([new ut(ft(ee),ee,Wr)],T),oe=new rt([new ut(ft(re),new xt([re,new yt(ie,{delay:4e3})]),ie)],T),Lt=new ut(ft(oe),oe,Qr),Et;return t.useTLS?Et=new xt([ne,new yt(Lt,{delay:2e3})]):Et=new xt([ne,new yt(Gr,{delay:2e3}),new yt(Lt,{delay:5e3})]),new qn(new Wn(new ut(ft(z),Et,Lt)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},Qn=Gn,$n=function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),p.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},Kn={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new R),e.close()},t.onerror=function(n){e.emit("error",n),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},Yn=Kn,Zn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vn=256*1024,tr=function(e){Zn(t,e);function t(n,r,i){var o=e.call(this)||this;return o.hooks=n,o.method=r,o.url=i,o}return t.prototype.start=function(n){var r=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){r.close()},A.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(n)},t.prototype.close=function(){this.unloader&&(A.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(n,r){for(;;){var i=this.advanceBuffer(r);if(i)this.emit("chunk",{status:n,data:i});else break}this.isBufferTooLong(r)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(n){var r=n.slice(this.position),i=r.indexOf(`
`);return i!==-1?(this.position+=i+1,r.slice(0,i)):null},t.prototype.isBufferTooLong=function(n){return this.position===n.length&&n.length>Vn},t}(tt),er=tr,Ot;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"})(Ot||(Ot={}));var it=Ot,nr=1,rr=function(){function e(t,n){this.hooks=t,this.session=$t(1e3)+"/"+ar(8),this.location=ir(n),this.readyState=it.CONNECTING,this.openStream()}return e.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(t,n){this.onClose(t,n,!0)},e.prototype.sendRaw=function(t){if(this.readyState===it.OPEN)try{return A.createSocketRequest("POST",Qt(or(this.location,this.session))).start(t),!0}catch{return!1}else return!1},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(t,n,r){this.closeStream(),this.readyState=it.CLOSED,this.onclose&&this.onclose({code:t,reason:n,wasClean:r})},e.prototype.onChunk=function(t){if(t.status===200){this.readyState===it.OPEN&&this.onActivity();var n,r=t.data.slice(0,1);switch(r){case"o":n=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(n);break;case"a":n=JSON.parse(t.data.slice(1)||"[]");for(var i=0;i<n.length;i++)this.onEvent(n[i]);break;case"m":n=JSON.parse(t.data.slice(1)||"null"),this.onEvent(n);break;case"h":this.hooks.onHeartbeat(this);break;case"c":n=JSON.parse(t.data.slice(1)||"[]"),this.onClose(n[0],n[1],!0);break}}},e.prototype.onOpen=function(t){this.readyState===it.CONNECTING?(t&&t.hostname&&(this.location.base=sr(this.location.base,t.hostname)),this.readyState=it.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(t){this.readyState===it.OPEN&&this.onmessage&&this.onmessage({data:t})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(t){this.onerror&&this.onerror(t)},e.prototype.openStream=function(){var t=this;this.stream=A.createSocketRequest("POST",Qt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(n){t.onChunk(n)}),this.stream.bind("finished",function(n){t.hooks.onFinished(t,n)}),this.stream.bind("buffer_too_long",function(){t.reconnect()});try{this.stream.start()}catch(n){q.defer(function(){t.onError(n),t.onClose(1006,"Could not start streaming",!1)})}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}();function ir(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}function or(e,t){return e.base+"/"+t+"/xhr_send"}function Qt(e){var t=e.indexOf("?")===-1?"?":"&";return e+t+"t="+ +new Date+"&n="+nr++}function sr(e,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e);return n[1]+t+n[3]}function $t(e){return Math.floor(Math.random()*e)}function ar(e){for(var t=[],n=0;n<e;n++)t.push($t(32).toString(32));return t.join("")}var cr=rr,ur={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},fr=ur,hr={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){t===200?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},pr=hr,lr={getRequest:function(e){var t=A.getXHRAPI(),n=new t;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText),e.emit("finished",n.status),e.close();break}},n},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},dr=lr,vr={createStreamingSocket:function(e){return this.createSocket(fr,e)},createPollingSocket:function(e){return this.createSocket(pr,e)},createSocket:function(e,t){return new cr(e,t)},createXHR:function(e,t){return this.createRequest(dr,e,t)},createRequest:function(e,t,n){return new er(e,t,n)}},Kt=vr;Kt.createXDR=function(e,t){return this.createRequest(Yn,e,t)};var yr=Kt,gr={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:h,DependenciesReceivers:C,getDefaultStrategy:Qn,Transports:Ve,transportConnectionInitializer:$n,HTTPFactory:yr,TimelineTransport:je,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():p.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:pt,jsonp:Ae}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout(function(){t.onDocumentBody(e)},0)},createJSONPRequest:function(e,t){return new Me(e,t)},createScriptRequest:function(e){return new Le(e)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var e=this.getXHRAPI();return new e},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return nn},createWebSocket:function(e){var t=this.getWebSocketAPI();return new t(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(t.indexOf("https:")===0))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return Boolean(e)&&new e().withCredentials!==void 0},isXDRSupported:function(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener:function(e){window.addEventListener!==void 0?window.addEventListener("unload",e,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){window.addEventListener!==void 0?window.removeEventListener("unload",e,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",e)}},A=gr,At;(function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(At||(At={}));var gt=At,_r=function(){function e(t,n,r){this.key=t,this.session=n,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(t,n){t<=this.options.level&&(this.events.push(B({},n,{timestamp:q.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(t){this.log(gt.ERROR,t)},e.prototype.info=function(t){this.log(gt.INFO,t)},e.prototype.debug=function(t){this.log(gt.DEBUG,t)},e.prototype.isEmpty=function(){return this.events.length===0},e.prototype.send=function(t,n){var r=this,i=B({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(i,function(o,u){o||r.sent++,n&&n(o,u)}),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),mr=_r,br=function(){function e(t,n,r,i){this.name=t,this.priority=n,this.transport=r,this.options=i||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(t,n){var r=this;if(this.isSupported()){if(this.priority<t)return Yt(new O,n)}else return Yt(new X,n);var i=!1,o=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),u=null,v=function(){o.unbind("initialized",v),o.connect()},T=function(){u=Z.createHandshake(o,function($){i=!0,z(),n(null,$)})},L=function($){z(),n($)},D=function(){z();var $;$=dt(o),n(new N($))},z=function(){o.unbind("initialized",v),o.unbind("open",T),o.unbind("error",L),o.unbind("closed",D)};return o.bind("initialized",v),o.bind("open",T),o.bind("error",L),o.bind("closed",D),o.initialize(),{abort:function(){i||(z(),u?u.close():o.close())},forceMinPriority:function($){i||r.priority<$&&(u?u.close():o.close())}}},e}(),Sr=br;function Yt(e,t){return q.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var Cr=A.Transports,wr=function(e,t,n,r,i,o){var u=Cr[n];if(!u)throw new M(n);var v=(!e.enabledTransports||Rt(e.enabledTransports,t)!==-1)&&(!e.disabledTransports||Rt(e.disabledTransports,t)===-1),T;return v?(i=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},i),T=new Sr(t,r,o?o.getAssistant(u):u,i)):T=Tr,T},Tr={isSupported:function(){return!1},connect:function(e,t){var n=q.defer(function(){t(new X)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},xr=function(e,t){var n="socket_id="+encodeURIComponent(e.socketId);for(var r in t.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t.params[r]);return n},Pr=function(e){if(typeof A.getAuthorizers()[e.transport]=="undefined")throw"'"+e.transport+"' is not a recognized auth transport";return function(t,n){var r=xr(t,e);A.getAuthorizers()[e.transport](A,r,e,f.UserAuthentication,n)}},Or=Pr,Ar=function(e,t){var n="socket_id="+encodeURIComponent(e.socketId);n+="&channel_name="+encodeURIComponent(e.channelName);for(var r in t.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t.params[r]);return n},kr=function(e){if(typeof A.getAuthorizers()[e.transport]=="undefined")throw"'"+e.transport+"' is not a recognized auth transport";return function(t,n){var r=Ar(t,e);A.getAuthorizers()[e.transport](A,r,e,f.ChannelAuthorization,n)}},Lr=kr,Er=function(e,t,n){var r={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return function(i,o){var u=e.channel(i.channelName),v=n(u,r);v.authorize(i.socketId,o)}},_t=function(){return _t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},_t.apply(this,arguments)};function Mr(e,t){var n={activityTimeout:e.activityTimeout||_.activityTimeout,cluster:e.cluster||_.cluster,httpPath:e.httpPath||_.httpPath,httpPort:e.httpPort||_.httpPort,httpsPort:e.httpsPort||_.httpsPort,pongTimeout:e.pongTimeout||_.pongTimeout,statsHost:e.statsHost||_.stats_host,unavailableTimeout:e.unavailableTimeout||_.unavailableTimeout,wsPath:e.wsPath||_.wsPath,wsPort:e.wsPort||_.wsPort,wssPort:e.wssPort||_.wssPort,enableStats:Ir(e),httpHost:Nr(e),useTLS:jr(e),wsHost:Rr(e),userAuthenticator:Dr(e),channelAuthorizer:Hr(e,t)};return"disabledTransports"in e&&(n.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(n.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(n.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(n.timelineParams=e.timelineParams),"nacl"in e&&(n.nacl=e.nacl),n}function Nr(e){return e.httpHost?e.httpHost:e.cluster?"sockjs-"+e.cluster+".pusher.com":_.httpHost}function Rr(e){return e.wsHost?e.wsHost:e.cluster?Zt(e.cluster):Zt(_.cluster)}function Zt(e){return"ws-"+e+".pusher.com"}function jr(e){return A.getProtocol()==="https:"?!0:e.forceTLS!==!1}function Ir(e){return"enableStats"in e?e.enableStats:"disableStats"in e?!e.disableStats:!1}function Dr(e){var t=_t({},_.userAuthentication,e.userAuthentication);return"customHandler"in t&&t.customHandler!=null?t.customHandler:Or(t)}function Ur(e,t){var n;return"channelAuthorization"in e?n=_t({},_.channelAuthorization,e.channelAuthorization):(n={transport:e.authTransport||_.authTransport,endpoint:e.authEndpoint||_.authEndpoint},"auth"in e&&("params"in e.auth&&(n.params=e.auth.params),"headers"in e.auth&&(n.headers=e.auth.headers)),"authorizer"in e&&(n.customHandler=Er(t,n,e.authorizer))),n}function Hr(e,t){var n=Ur(e,t);return"customHandler"in n&&n.customHandler!=null?n.customHandler:Lr(n)}var qr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zr=function(e){qr(t,e);function t(n){var r=e.call(this,function(i,o){I.debug("No callbacks on user for "+i)})||this;return r.signin_requested=!1,r.user_data=null,r.serverToUserChannel=null,r.pusher=n,r.pusher.connection.bind("connected",function(){r._signin()}),r.pusher.connection.bind("connecting",function(){r._disconnect()}),r.pusher.connection.bind("disconnected",function(){r._disconnect()}),r.pusher.connection.bind("message",function(i){var o=i.event;o==="pusher:signin_success"&&r._onSigninSuccess(i.data),r.serverToUserChannel&&r.serverToUserChannel.name===i.channel&&r.serverToUserChannel.handleEvent(i)}),r}return t.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},t.prototype._signin=function(){var n=this;if(!!this.signin_requested&&this.pusher.connection.state==="connected"){var r=function(i,o){if(i){I.warn("Error during signin: "+i);return}n.pusher.send_event("pusher:signin",{auth:o.auth,user_data:o.user_data})};this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},r)}},t.prototype._onSigninSuccess=function(n){try{this.user_data=JSON.parse(n.user_data)}catch{I.error("Failed parsing user data after signin: "+n.user_data);return}if(typeof this.user_data.id!="string"||this.user_data.id===""){I.error("user_data doesn't contain an id. user_data: "+this.user_data);return}this._subscribeChannels()},t.prototype._subscribeChannels=function(){var n=this,r=function(i){i.subscriptionPending&&i.subscriptionCancelled?i.reinstateSubscription():!i.subscriptionPending&&n.pusher.connection.state==="connected"&&i.subscribe()};this.serverToUserChannel=new Ct("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(i,o){i.indexOf("pusher_internal:")===0||i.indexOf("pusher:")===0||n.emit(i,o)}),r(this.serverToUserChannel)},t.prototype._disconnect=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null)},t}(tt),Br=zr,Vt=function(){function e(t,n){var r=this;if(Fr(t),n=n||{},!n.cluster&&!(n.wsHost||n.httpHost)){var i=w.buildLogSuffix("javascriptQuickStart");I.warn("You should always specify a cluster when connecting. "+i)}"disableStats"in n&&I.warn("The disableStats option is deprecated in favor of enableStats"),this.key=t,this.config=Mr(n,this),this.channels=Z.createChannels(),this.global_emitter=new tt,this.sessionID=Math.floor(Math.random()*1e9),this.timeline=new mr(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:gt.INFO,version:_.VERSION}),this.config.enableStats&&(this.timelineSender=Z.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+A.TimelineTransport.name}));var o=function(u){return A.getDefaultStrategy(r.config,u,wr)};this.connection=Z.createConnectionManager(this.key,{getStrategy:o,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())}),this.connection.bind("message",function(u){var v=u.event,T=v.indexOf("pusher_internal:")===0;if(u.channel){var L=r.channel(u.channel);L&&L.handleEvent(u)}T||r.global_emitter.emit(u.event,u.data)}),this.connection.bind("connecting",function(){r.channels.disconnect()}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(u){I.warn(u)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),this.user=new Br(this),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.getClientFeatures=function(){return jt(Ut({ws:A.Transports.ws},function(t){return t.isSupported({})}))},e.prototype.channel=function(t){return this.channels.find(t)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),n=this.timelineSender;this.timelineSenderTimer=new ye(6e4,function(){n.send(t)})}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(t,n,r){return this.global_emitter.bind(t,n,r),this},e.prototype.unbind=function(t,n,r){return this.global_emitter.unbind(t,n,r),this},e.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},e.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},e.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},e.prototype.subscribe=function(t){var n=this.channels.add(t,this);return n.subscriptionPending&&n.subscriptionCancelled?n.reinstateSubscription():!n.subscriptionPending&&this.connection.state==="connected"&&n.subscribe(),n},e.prototype.unsubscribe=function(t){var n=this.channels.find(t);n&&n.subscriptionPending?n.cancelSubscription():(n=this.channels.remove(t),n&&n.subscribed&&n.unsubscribe())},e.prototype.send_event=function(t,n,r){return this.connection.send_event(t,n,r)},e.prototype.shouldUseTLS=function(){return this.config.useTLS},e.prototype.signin=function(){this.user.signin()},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=A,e.ScriptReceivers=A.ScriptReceivers,e.DependenciesReceivers=A.DependenciesReceivers,e.auth_callbacks=A.auth_callbacks,e}(),kt=s.default=Vt;function Fr(e){if(e==null)throw"You must pass your app key when you instantiate Pusher."}A.setup(Vt)}])})})(fe);var _i=ei(fe.exports),k;(function(g){g[g.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",g[g.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",g[g.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(k||(k={}));var ai=function(){function g(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return g.prototype.addTypeMetadata=function(c){this._typeMetadatas.has(c.target)||this._typeMetadatas.set(c.target,new Map),this._typeMetadatas.get(c.target).set(c.propertyName,c)},g.prototype.addTransformMetadata=function(c){this._transformMetadatas.has(c.target)||this._transformMetadatas.set(c.target,new Map),this._transformMetadatas.get(c.target).has(c.propertyName)||this._transformMetadatas.get(c.target).set(c.propertyName,[]),this._transformMetadatas.get(c.target).get(c.propertyName).push(c)},g.prototype.addExposeMetadata=function(c){this._exposeMetadatas.has(c.target)||this._exposeMetadatas.set(c.target,new Map),this._exposeMetadatas.get(c.target).set(c.propertyName,c)},g.prototype.addExcludeMetadata=function(c){this._excludeMetadatas.has(c.target)||this._excludeMetadatas.set(c.target,new Map),this._excludeMetadatas.get(c.target).set(c.propertyName,c)},g.prototype.findTransformMetadatas=function(c,a,s){return this.findMetadatas(this._transformMetadatas,c,a).filter(function(y){return!y.options||y.options.toClassOnly===!0&&y.options.toPlainOnly===!0?!0:y.options.toClassOnly===!0?s===k.CLASS_TO_CLASS||s===k.PLAIN_TO_CLASS:y.options.toPlainOnly===!0?s===k.CLASS_TO_PLAIN:!0})},g.prototype.findExcludeMetadata=function(c,a){return this.findMetadata(this._excludeMetadatas,c,a)},g.prototype.findExposeMetadata=function(c,a){return this.findMetadata(this._exposeMetadatas,c,a)},g.prototype.findExposeMetadataByCustomName=function(c,a){return this.getExposedMetadatas(c).find(function(s){return s.options&&s.options.name===a})},g.prototype.findTypeMetadata=function(c,a){return this.findMetadata(this._typeMetadatas,c,a)},g.prototype.getStrategy=function(c){var a=this._excludeMetadatas.get(c),s=a&&a.get(void 0),y=this._exposeMetadatas.get(c),d=y&&y.get(void 0);return s&&d||!s&&!d?"none":s?"excludeAll":"exposeAll"},g.prototype.getExposedMetadatas=function(c){return this.getMetadata(this._exposeMetadatas,c)},g.prototype.getExcludedMetadatas=function(c){return this.getMetadata(this._excludeMetadatas,c)},g.prototype.getExposedProperties=function(c,a){return this.getExposedMetadatas(c).filter(function(s){return!s.options||s.options.toClassOnly===!0&&s.options.toPlainOnly===!0?!0:s.options.toClassOnly===!0?a===k.CLASS_TO_CLASS||a===k.PLAIN_TO_CLASS:s.options.toPlainOnly===!0?a===k.CLASS_TO_PLAIN:!0}).map(function(s){return s.propertyName})},g.prototype.getExcludedProperties=function(c,a){return this.getExcludedMetadatas(c).filter(function(s){return!s.options||s.options.toClassOnly===!0&&s.options.toPlainOnly===!0?!0:s.options.toClassOnly===!0?a===k.CLASS_TO_CLASS||a===k.PLAIN_TO_CLASS:s.options.toPlainOnly===!0?a===k.CLASS_TO_PLAIN:!0}).map(function(s){return s.propertyName})},g.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},g.prototype.getMetadata=function(c,a){var s=c.get(a),y;s&&(y=Array.from(s.values()).filter(function(C){return C.propertyName!==void 0}));for(var d=[],h=0,S=this.getAncestors(a);h<S.length;h++){var _=S[h],U=c.get(_);if(U){var b=Array.from(U.values()).filter(function(C){return C.propertyName!==void 0});d.push.apply(d,b)}}return d.concat(y||[])},g.prototype.findMetadata=function(c,a,s){var y=c.get(a);if(y){var d=y.get(s);if(d)return d}for(var h=0,S=this.getAncestors(a);h<S.length;h++){var _=S[h],U=c.get(_);if(U){var b=U.get(s);if(b)return b}}},g.prototype.findMetadatas=function(c,a,s){var y=c.get(a),d;y&&(d=y.get(s));for(var h=[],S=0,_=this.getAncestors(a);S<_.length;S++){var U=_[S],b=c.get(U);b&&b.has(s)&&h.push.apply(h,b.get(s))}return h.slice().reverse().concat((d||[]).slice().reverse())},g.prototype.getAncestors=function(c){if(!c)return[];if(!this._ancestorsMap.has(c)){for(var a=[],s=Object.getPrototypeOf(c.prototype.constructor);typeof s.prototype!="undefined";s=Object.getPrototypeOf(s.prototype.constructor))a.push(s);this._ancestorsMap.set(c,a)}return this._ancestorsMap.get(c)},g}(),F=new ai;function ci(){if(typeof globalThis!="undefined")return globalThis;if(typeof global!="undefined")return global;if(typeof window!="undefined")return window;if(typeof self!="undefined")return self}function ui(g){return g!==null&&typeof g=="object"&&typeof g.then=="function"}var ue=globalThis&&globalThis.__spreadArray||function(g,c,a){if(a||arguments.length===2)for(var s=0,y=c.length,d;s<y;s++)(d||!(s in c))&&(d||(d=Array.prototype.slice.call(c,0,s)),d[s]=c[s]);return g.concat(d||Array.prototype.slice.call(c))};function fi(g){var c=new g;return!(c instanceof Set)&&!("push"in c)?[]:c}var st=function(){function g(c,a){this.transformationType=c,this.options=a,this.recursionStack=new Set}return g.prototype.transform=function(c,a,s,y,d,h){var S=this;if(h===void 0&&(h=0),Array.isArray(a)||a instanceof Set){var _=y&&this.transformationType===k.PLAIN_TO_CLASS?fi(y):[];return a.forEach(function(f,l){var m=c?c[l]:void 0;if(!S.options.enableCircularCheck||!S.isCircular(f)){var x=void 0;if(typeof s!="function"&&s&&s.options&&s.options.discriminator&&s.options.discriminator.property&&s.options.discriminator.subTypes){if(S.transformationType===k.PLAIN_TO_CLASS){x=s.options.discriminator.subTypes.find(function(H){return H.name===f[s.options.discriminator.property]});var R={newObject:_,object:f,property:void 0},O=s.typeFunction(R);x===void 0?x=O:x=x.value,s.options.keepDiscriminatorProperty||delete f[s.options.discriminator.property]}S.transformationType===k.CLASS_TO_CLASS&&(x=f.constructor),S.transformationType===k.CLASS_TO_PLAIN&&(f[s.options.discriminator.property]=s.options.discriminator.subTypes.find(function(H){return H.value===f.constructor}).name)}else x=s;var N=S.transform(m,f,x,void 0,f instanceof Map,h+1);_ instanceof Set?_.add(N):_.push(N)}else S.transformationType===k.CLASS_TO_CLASS&&(_ instanceof Set?_.add(f):_.push(f))}),_}else{if(s===String&&!d)return a==null?a:String(a);if(s===Number&&!d)return a==null?a:Number(a);if(s===Boolean&&!d)return a==null?a:Boolean(a);if((s===Date||a instanceof Date)&&!d)return a instanceof Date?new Date(a.valueOf()):a==null?a:new Date(a);if(!!ci().Buffer&&(s===Buffer||a instanceof Buffer)&&!d)return a==null?a:Buffer.from(a);if(ui(a)&&!d)return new Promise(function(f,l){a.then(function(m){return f(S.transform(void 0,m,s,void 0,void 0,h+1))},l)});if(!d&&a!==null&&typeof a=="object"&&typeof a.then=="function")return a;if(typeof a=="object"&&a!==null){!s&&a.constructor!==Object&&(!Array.isArray(a)&&a.constructor===Array||(s=a.constructor)),!s&&c&&(s=c.constructor),this.options.enableCircularCheck&&this.recursionStack.add(a);var U=this.getKeys(s,a,d),b=c||{};!c&&(this.transformationType===k.PLAIN_TO_CLASS||this.transformationType===k.CLASS_TO_CLASS)&&(d?b=new Map:s?b=new s:b={});for(var C=function(f){if(f==="__proto__"||f==="constructor")return"continue";var l=f,m=f,x=f;if(!p.options.ignoreDecorators&&s){if(p.transformationType===k.PLAIN_TO_CLASS){var R=F.findExposeMetadataByCustomName(s,f);R&&(x=R.propertyName,m=R.propertyName)}else if(p.transformationType===k.CLASS_TO_PLAIN||p.transformationType===k.CLASS_TO_CLASS){var R=F.findExposeMetadata(s,f);R&&R.options&&R.options.name&&(m=R.options.name)}}var O=void 0;p.transformationType===k.PLAIN_TO_CLASS?O=a[l]:a instanceof Map?O=a.get(l):a[l]instanceof Function?O=a[l]():O=a[l];var N=void 0,H=O instanceof Map;if(s&&d)N=s;else if(s){var M=F.findTypeMetadata(s,x);if(M){var X={newObject:b,object:a,property:x},W=M.typeFunction?M.typeFunction(X):M.reflectedType;M.options&&M.options.discriminator&&M.options.discriminator.property&&M.options.discriminator.subTypes?a[l]instanceof Array?N=M:(p.transformationType===k.PLAIN_TO_CLASS&&(N=M.options.discriminator.subTypes.find(function(Q){if(O&&O instanceof Object&&M.options.discriminator.property in O)return Q.name===O[M.options.discriminator.property]}),N===void 0?N=W:N=N.value,M.options.keepDiscriminatorProperty||O&&O instanceof Object&&M.options.discriminator.property in O&&delete O[M.options.discriminator.property]),p.transformationType===k.CLASS_TO_CLASS&&(N=O.constructor),p.transformationType===k.CLASS_TO_PLAIN&&O&&(O[M.options.discriminator.property]=M.options.discriminator.subTypes.find(function(Q){return Q.value===O.constructor}).name)):N=W,H=H||M.reflectedType===Map}else if(p.options.targetMaps)p.options.targetMaps.filter(function(Q){return Q.target===s&&!!Q.properties[x]}).forEach(function(Q){return N=Q.properties[x]});else if(p.options.enableImplicitConversion&&p.transformationType===k.PLAIN_TO_CLASS){var ht=Reflect.getMetadata("design:type",s.prototype,x);ht&&(N=ht)}}var pt=Array.isArray(a[l])?p.getReflectedType(s,x):void 0,lt=c?c[l]:void 0;if(b.constructor.prototype){var V=Object.getOwnPropertyDescriptor(b.constructor.prototype,m);if((p.transformationType===k.PLAIN_TO_CLASS||p.transformationType===k.CLASS_TO_CLASS)&&(V&&!V.set||b[m]instanceof Function))return"continue"}if(!p.options.enableCircularCheck||!p.isCircular(O)){var K=p.transformationType===k.PLAIN_TO_CLASS?m:f,j=void 0;p.transformationType===k.CLASS_TO_PLAIN?(j=a[K],j=p.applyCustomTransformations(j,s,K,a,p.transformationType),j=a[K]===j?O:j,j=p.transform(lt,j,N,pt,H,h+1)):O===void 0&&p.options.exposeDefaultValues?j=b[m]:(j=p.transform(lt,O,N,pt,H,h+1),j=p.applyCustomTransformations(j,s,K,a,p.transformationType)),(j!==void 0||p.options.exposeUnsetFields)&&(b instanceof Map?b.set(m,j):b[m]=j)}else if(p.transformationType===k.CLASS_TO_CLASS){var j=O;j=p.applyCustomTransformations(j,s,f,a,p.transformationType),(j!==void 0||p.options.exposeUnsetFields)&&(b instanceof Map?b.set(m,j):b[m]=j)}},p=this,P=0,E=U;P<E.length;P++){var w=E[P];C(w)}return this.options.enableCircularCheck&&this.recursionStack.delete(a),b}else return a}},g.prototype.applyCustomTransformations=function(c,a,s,y,d){var h=this,S=F.findTransformMetadatas(a,s,this.transformationType);return this.options.version!==void 0&&(S=S.filter(function(_){return _.options?h.checkVersion(_.options.since,_.options.until):!0})),this.options.groups&&this.options.groups.length?S=S.filter(function(_){return _.options?h.checkGroups(_.options.groups):!0}):S=S.filter(function(_){return!_.options||!_.options.groups||!_.options.groups.length}),S.forEach(function(_){c=_.transformFn({value:c,key:s,obj:y,type:d,options:h.options})}),c},g.prototype.isCircular=function(c){return this.recursionStack.has(c)},g.prototype.getReflectedType=function(c,a){if(!!c){var s=F.findTypeMetadata(c,a);return s?s.reflectedType:void 0}},g.prototype.getKeys=function(c,a,s){var y=this,d=F.getStrategy(c);d==="none"&&(d=this.options.strategy||"exposeAll");var h=[];if((d==="exposeAll"||s)&&(a instanceof Map?h=Array.from(a.keys()):h=Object.keys(a)),s)return h;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&c){var S=F.getExposedProperties(c,this.transformationType),_=F.getExcludedProperties(c,this.transformationType);h=ue(ue([],S,!0),_,!0)}if(!this.options.ignoreDecorators&&c){var S=F.getExposedProperties(c,this.transformationType);this.transformationType===k.PLAIN_TO_CLASS&&(S=S.map(function(C){var p=F.findExposeMetadata(c,C);return p&&p.options&&p.options.name?p.options.name:C})),this.options.excludeExtraneousValues?h=S:h=h.concat(S);var U=F.getExcludedProperties(c,this.transformationType);U.length>0&&(h=h.filter(function(C){return!U.includes(C)})),this.options.version!==void 0&&(h=h.filter(function(C){var p=F.findExposeMetadata(c,C);return!p||!p.options?!0:y.checkVersion(p.options.since,p.options.until)})),this.options.groups&&this.options.groups.length?h=h.filter(function(C){var p=F.findExposeMetadata(c,C);return!p||!p.options?!0:y.checkGroups(p.options.groups)}):h=h.filter(function(C){var p=F.findExposeMetadata(c,C);return!p||!p.options||!p.options.groups||!p.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(h=h.filter(function(b){return y.options.excludePrefixes.every(function(C){return b.substr(0,C.length)!==C})})),h=h.filter(function(b,C,p){return p.indexOf(b)===C}),h},g.prototype.checkVersion=function(c,a){var s=!0;return s&&c&&(s=this.options.version>=c),s&&a&&(s=this.options.version<a),s},g.prototype.checkGroups=function(c){return c?this.options.groups.some(function(a){return c.includes(a)}):!0},g}(),at={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},J=globalThis&&globalThis.__assign||function(){return J=Object.assign||function(g){for(var c,a=1,s=arguments.length;a<s;a++){c=arguments[a];for(var y in c)Object.prototype.hasOwnProperty.call(c,y)&&(g[y]=c[y])}return g},J.apply(this,arguments)},hi=function(){function g(){}return g.prototype.instanceToPlain=function(c,a){var s=new st(k.CLASS_TO_PLAIN,J(J({},at),a));return s.transform(void 0,c,void 0,void 0,void 0,void 0)},g.prototype.classToPlainFromExist=function(c,a,s){var y=new st(k.CLASS_TO_PLAIN,J(J({},at),s));return y.transform(a,c,void 0,void 0,void 0,void 0)},g.prototype.plainToInstance=function(c,a,s){var y=new st(k.PLAIN_TO_CLASS,J(J({},at),s));return y.transform(void 0,a,c,void 0,void 0,void 0)},g.prototype.plainToClassFromExist=function(c,a,s){var y=new st(k.PLAIN_TO_CLASS,J(J({},at),s));return y.transform(c,a,void 0,void 0,void 0,void 0)},g.prototype.instanceToInstance=function(c,a){var s=new st(k.CLASS_TO_CLASS,J(J({},at),a));return s.transform(void 0,c,void 0,void 0,void 0,void 0)},g.prototype.classToClassFromExist=function(c,a,s){var y=new st(k.CLASS_TO_CLASS,J(J({},at),s));return y.transform(a,c,void 0,void 0,void 0,void 0)},g.prototype.serialize=function(c,a){return JSON.stringify(this.instanceToPlain(c,a))},g.prototype.deserialize=function(c,a,s){var y=JSON.parse(a);return this.plainToInstance(c,y,s)},g.prototype.deserializeArray=function(c,a,s){var y=JSON.parse(a);return this.plainToInstance(c,y,s)},g}(),pi=new hi;function mi(g,c,a){return pi.plainToInstance(g,c,a)}class bi{constructor(c,a,s,y,d,h){G(this,"id");G(this,"sender");G(this,"text");G(this,"created_at");G(this,"updated_at");G(this,"chat");this.id=c,this.sender=a,this.text=s,this.created_at=y,this.updated_at=d,this.chat=h}}class Si{constructor(c,a,s,y,d,h){G(this,"id");G(this,"title");G(this,"owner");G(this,"created_at");G(this,"updated_at");G(this,"messages");this.id=c,this.title=a,this.owner=s,this.created_at=y,this.updated_at=d,this.messages=h}}var li={name:"Portal",props:{appendTo:{type:String,default:"body"},disabled:{type:Boolean,default:!1}},data(){return{mounted:!1}},mounted(){this.mounted=si.isClient()},computed:{inline(){return this.disabled||this.appendTo==="self"}}};function di(g,c,a,s,y,d){return d.inline?ce(g.$slots,"default",{key:0}):y.mounted?(ni(),ri(ii,{key:1,to:a.appendTo},[ce(g.$slots,"default")],8,["to"])):oi("",!0)}li.render=di;export{Si as C,bi as M,_i as P,mi as p,li as s};
